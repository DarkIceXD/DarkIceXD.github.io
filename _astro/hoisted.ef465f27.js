const g=()=>{const e=parseInt(localStorage.theme);(isNaN(e)?0:e)===0?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};g();document.addEventListener("astro:after-swap",g);const T=e=>history.state&&history.replaceState(e,""),b=!!document.startViewTransition,m=()=>!!document.querySelector('[name="astro-view-transitions-enabled"]'),w=e=>document.dispatchEvent(new Event(e)),A=()=>w("astro:page-load"),u="data-astro-transition-persist",k=new DOMParser;let h=0;history.state?(h=history.state.index,scrollTo({left:history.state.scrollX,top:history.state.scrollY})):m()&&history.replaceState({index:h,scrollX,scrollY,intraPage:!1},"");const x=(e,n)=>{let r=!1,t=!1;return(...s)=>{if(r){t=!0;return}e(...s),r=!0,setTimeout(()=>{t&&(t=!1,e(...s)),r=!1},n)}};async function P(e){try{const n=await fetch(e),r=n.headers.get("content-type")?.replace(/;.*$/,"");return r!=="text/html"&&r!=="application/xhtml+xml"?null:{html:await n.text(),redirected:n.redirected?n.url:void 0,mediaType:r}}catch{return null}}function S(){const e=document.querySelector('[name="astro-view-transitions-fallback"]');return e?e.getAttribute("content"):"animate"}function v(){for(const e of document.scripts)e.dataset.astroExec=""}function L(){let e=Promise.resolve();for(const n of Array.from(document.scripts)){if(n.dataset.astroExec==="")continue;const r=document.createElement("script");r.innerHTML=n.innerHTML;for(const t of n.attributes){if(t.name==="src"){const s=new Promise(l=>{r.onload=l});e=e.then(()=>s)}r.setAttribute(t.name,t.value)}r.dataset.astroExec="",n.replaceWith(r)}return e}function R(e){const n=e.effect;return!n||!(n instanceof KeyframeEffect)||!n.target?!1:window.getComputedStyle(n.target,n.pseudoElement).animationIterationCount==="infinite"}const q=e=>{e.href!==location.href&&history.pushState({index:++h,scrollX:0,scrollY:0},"",e.href),scrollTo({left:0,top:0,behavior:"instant"}),e.hash&&(location.href=e.href)};async function p(e,n,r,t){const s=i=>{const c=i.getAttribute(u),d=c&&e.head.querySelector(`[${u}="${c}"]`);if(d)return d;if(i.matches("link[rel=stylesheet]")){const o=i.getAttribute("href");return e.head.querySelector(`link[rel=stylesheet][href="${o}"]`)}return null},l=()=>{const i=document.documentElement,c=[...i.attributes].filter(({name:o})=>(i.removeAttribute(o),o.startsWith("data-astro-")));[...e.documentElement.attributes,...c].forEach(({name:o,value:a})=>i.setAttribute(o,a));for(const o of document.scripts)for(const a of e.scripts)if(!o.src&&o.textContent===a.textContent||o.src&&o.type===a.type&&o.src===a.src){a.dataset.astroExec="";break}for(const o of Array.from(document.head.children)){const a=s(o);a?a.remove():o.remove()}document.head.append(...e.head.children);const d=document.body;document.body.replaceWith(e.body);for(const o of d.querySelectorAll(`[${u}]`)){const a=o.getAttribute(u),y=document.querySelector(`[${u}="${a}"]`);y&&y.replaceWith(o)}r?scrollTo(r.scrollX,r.scrollY):q(n),w("astro:after-swap")},f=[];for(const i of e.querySelectorAll("head link[rel=stylesheet]"))if(!document.querySelector(`[${u}="${i.getAttribute(u)}"], link[rel=stylesheet]`)){const c=document.createElement("link");c.setAttribute("rel","preload"),c.setAttribute("as","style"),c.setAttribute("href",i.getAttribute("href")),f.push(new Promise(d=>{["load","error"].forEach(o=>c.addEventListener(o,d)),document.head.append(c)}))}if(f.length&&await Promise.all(f),t==="animate"){const i=document.getAnimations();document.documentElement.dataset.astroTransitionFallback="old";const c=document.getAnimations().filter(a=>!i.includes(a)&&!R(a)),d=Promise.all(c.map(a=>a.finished)),o=()=>{l(),document.documentElement.dataset.astroTransitionFallback="new"};await d,o()}else l()}async function E(e,n,r){let t;const s=n.href,l=await P(s);if(l===null){location.href=s;return}l.redirected&&(n=new URL(l.redirected));const f=k.parseFromString(l.html,l.mediaType);if(f.querySelectorAll("noscript").forEach(i=>i.remove()),!f.querySelector('[name="astro-view-transitions-enabled"]')){location.href=s;return}r||history.replaceState({...history.state,scrollX,scrollY},""),document.documentElement.dataset.astroTransition=e,b?t=document.startViewTransition(()=>p(f,n,r)).finished:t=p(f,n,r,S());try{await t}finally{await L(),v(),A()}}function $(e){if(document.querySelector(`link[rel=prefetch][href="${e}"]`))return;if(navigator.connection){let r=navigator.connection;if(r.saveData||/(2|3)g/.test(r.effectiveType||""))return}let n=document.createElement("link");n.setAttribute("rel","prefetch"),n.setAttribute("href",e),document.head.append(n)}if(b||S()!=="none"){let e=function(r){if(!m()){location.href=r;return}const t=new URL(r,location.href);location.origin===t.origin&&location.pathname===t.pathname&&location.search===t.search?(location.href!==t.href&&(history.replaceState({...history.state,intraPage:!0},""),history.pushState({index:++h,scrollX:0,scrollY:0},"",t.href)),t.hash?location.href=t.href:scrollTo({left:0,top:0,behavior:"instant"})):E("forward",t)};document.addEventListener("click",r=>{let t=r.target;t instanceof Element&&t.tagName!=="A"&&(t=t.closest("a")),!(!t||!(t instanceof HTMLAnchorElement)||t.dataset.astroReload!==void 0||t.hasAttribute("download")||!t.href||t.target&&t.target!=="_self"||t.origin!==location.origin||r.button!==0||r.metaKey||r.ctrlKey||r.altKey||r.shiftKey||r.defaultPrevented)&&(r.preventDefault(),e(t.href))}),addEventListener("popstate",r=>{if(!m()&&r.state){history.scrollRestoration&&(history.scrollRestoration="manual"),location.reload();return}if(r.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}history.scrollRestoration&&(history.scrollRestoration="manual");const t=history.state;if(t.intraPage)scrollTo(t.scrollX,t.scrollY);else{const s=t.index,l=s>h?"forward":"back";h=s,E(l,new URL(location.href),t)}}),["mouseenter","touchstart","focus"].forEach(r=>{document.addEventListener(r,t=>{if(t.target instanceof HTMLAnchorElement){let s=t.target;s.origin===location.origin&&s.pathname!==location.pathname&&m()&&$(s.pathname)}},{passive:!0,capture:!0})}),addEventListener("load",A);const n=()=>{T({...history.state,scrollX,scrollY})};"onscrollend"in window?addEventListener("scrollend",n):addEventListener("scroll",x(n,300)),v()}
