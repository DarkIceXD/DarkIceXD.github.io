import{c as p,d as h,e as d,r as R,i as g,u as _,t as y}from"./chunks/web.217e897e.js";const v=y('<button class="px-6 py-2.5 bg-blue-600 text-white rounded shadow hover:bg-blue-700 hover:shadow-lg active:bg-blue-800 active:shadow-lg transition duration-300">Start</button>'),w=y('<h5 class="text-xl font-medium"></h5>'),I=y('<canvas class="w-full sm:w-2/3 border" width="800" height="600"></canvas>'),s={GAME_TIMEOUT:100,CANVAS_BACKGROUND_COLOUR:"black",SNAKE_COLOUR:"black",SNAKE_BORDER_COLOUR:"white",FOOD_COLOUR:"black",FOOD_BORDER_COLOUR:"red",SIZE:20},i={Up:0,Down:1,Left:2,Right:3},U=(t,e)=>{t.fillStyle=s.CANVAS_BACKGROUND_COLOUR,t.fillRect(0,0,e.x,e.y)},x=(t,e)=>{e.parts.forEach(r=>{t.fillStyle=s.SNAKE_COLOUR,t.fillRect(r.x*s.SIZE,r.y*s.SIZE,s.SIZE,s.SIZE),t.strokeStyle=s.SNAKE_BORDER_COLOUR,t.lineWidth=2,t.strokeRect(r.x*s.SIZE,r.y*s.SIZE,s.SIZE,s.SIZE)})},A=(t,e)=>{t.fillStyle=s.FOOD_COLOUR,t.fillRect(e.x*s.SIZE,e.y*s.SIZE,s.SIZE,s.SIZE),t.strokeStyle=s.FOOD_BORDER_COLOUR,t.strokeRect(e.x*s.SIZE,e.y*s.SIZE,s.SIZE,s.SIZE)},l=t=>{switch(t){case i.Up:return{x:0,y:-1};case i.Down:return{x:0,y:1};case i.Left:return{x:-1,y:0};case i.Right:return{x:1,y:0};default:return}},Z=(t,e)=>{switch(t){case i.Up:return e==i.Down?void 0:l(e);case i.Down:return e==i.Up?void 0:l(e);case i.Left:return e==i.Right?void 0:l(e);case i.Right:return e==i.Left?void 0:l(e);default:return}},L=(t,e)=>{const r=Z(t.direction.direction,e);r&&(t.direction.direction=e,t.direction.vector=r),t.parts.unshift({x:t.parts[0].x+t.direction.vector.x,y:t.parts[0].y+t.direction.vector.y})},f=t=>({x:Math.floor(Math.random()*t.x),y:Math.floor(Math.random()*t.y)}),C=(t,e)=>{for(let r=4;r<t.parts.length;r++)if(t.parts[r].x===t.parts[0].x&&t.parts[r].y===t.parts[0].y)return!0;return t.parts[0].x<0||t.parts[0].x>e.x||t.parts[0].y<0||t.parts[0].y>e.y};let u=!1,a;const[m,E]=p("Press Start"),O=(t,e,r,o,n,c)=>{if(C(o,r)){u=!1,E("GAME OVER, Score: "+c);return}setTimeout(()=>{L(o,a),o.parts[0].x===n.x&&o.parts[0].y===n.y?(c+=1,E("Score: "+c),n=f(r)):o.parts.pop(),U(t,e),A(t,n),x(t,o),O(t,e,r,o,n,c)},s.GAME_TIMEOUT)},S=t=>{const e=t.code;e==="ArrowLeft"||e==="KeyA"?a=i.Left:e==="ArrowUp"||e==="KeyW"?a=i.Up:e==="ArrowRight"||e==="KeyD"?a=i.Right:(e==="ArrowDown"||e==="KeyS")&&(a=i.Down)};function K(){let t;const e=()=>{if(t.setAttribute("tabindex","0"),t.focus(),u)return;u=!0,t.removeEventListener("keydown",S),t.addEventListener("keydown",S),a=i.Down;const r={x:t.width,y:t.height},o={x:r.x/s.SIZE-1,y:r.y/s.SIZE-1};E("Score: 0"),O(t.getContext("2d",{alpha:!1}),r,o,{direction:{direction:a,vector:l(a)},parts:[{x:3,y:3}]},f(o),0)};return[(()=>{const r=d(v);return r.$$click=e,R(),r})(),(()=>{const r=d(w);return g(r,m),r})(),(()=>{const r=d(I),o=t;return typeof o=="function"?_(o,r):t=r,r})()]}h(["click"]);export{K as default};
